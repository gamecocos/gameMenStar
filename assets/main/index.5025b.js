window.__require=function t(e,i,n){function o(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=i[c]={exports:{}};e[c][0].call(u.exports,function(t){return o(e[c][1][t]||t)},u,u.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({Background:[function(t,e){"use strict";cc._RF.push(e,"c3ffbN/YY9F84IRjSUJJbqL","Background"),cc.Class({extends:cc.Component,properties:{speed:150},start:function(){},move:function(t,e){t.x+t.width/2<=-cc.winSize.width/2?t.x+=2*t.width-e:t.x-=e},update:function(t){var e=this;this.node.children.forEach(function(i){e.move(i,t*e.speed)})}}),cc._RF.pop()},{}],Game:[function(t,e){"use strict";cc._RF.push(e,"163ea+U2dtDEpX4FgBWDNUe","Game");var i=t("Globals");cc.Class({extends:cc.Component,properties:{hero:{default:null,type:cc.Node},score:{default:null,type:cc.Label},music:{default:null,type:cc.AudioClip},sound:{default:null,type:cc.AudioClip},heroDie:{default:null,type:cc.AudioClip},back:{default:null,type:cc.Node}},onLoad:function(){var t=this;cc.audioEngine.isMusicPlaying()||cc.audioEngine.playMusic(this.music,!0),this.enablePhyscis(),i.score=0,this.hero.on("score",function(){cc.audioEngine.play(t.sound),++i.score,t.score.string=i.score.toString()}),this.hero.once("die",function(){cc.audioEngine.play(t.heroDie),cc.director.loadScene("Score")}),this.back.on(cc.Node.EventType.TOUCH_START,this.betBack,this)},betBack:function(){cc.director.loadScene("Score")},enablePhyscis:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0}}),cc._RF.pop()},{Globals:"Globals"}],Globals:[function(t,e){"use strict";cc._RF.push(e,"21bb2zA2WFGO70yDPNnZtuk","Globals"),e.exports={score:0},cc._RF.pop()},{}],Hero:[function(t,e){"use strict";cc._RF.push(e,"b50460Yb0RKOJ4+3JeIFC3I","Hero"),cc.Class({extends:cc.Component,properties:{jumpSpeed:cc.v2({x:0,y:300}),maxJumpDistance:300,jumpSprite:{default:null,type:cc.SpriteFrame}},onLoad:function(){var t=this;this.animation=this.node.getComponent(cc.Animation),this.sprite=this.node.getComponent(cc.Sprite),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.macro.KEY.space:t.jumpKeyPressed=!0}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){switch(e.keyCode){case cc.macro.KEY.space:t.jumpKeyPressed=!1,t.isJumping=!1}}),this.node.parent.on(cc.Node.EventType.TOUCH_START,function(){t.jumpKeyPressed=!0}),this.node.parent.on(cc.Node.EventType.TOUCH_END,function(){t.jumpKeyPressed=!1,t.isJumping=!1})},start:function(){this.body=this.getComponent(cc.RigidBody),this.isJumping=!1,this.jumpKeyPressed=!1,this.touching=!1,this.startJumpY=!1},onBeginContact:function(){this.touching=!0},onEndContact:function(){this.touching=!1},onCollisionEnter:function(t){"diamond"===t.node.name&&(t.node.destroy(),this.node.emit("score"))},animate:function(){this.touching?this.animation.getAnimationState("running").isPlaying||this.animation.start("running"):this.animation.getAnimationState("running").isPlaying&&(this.animation.stop(),this.sprite.spriteFrame=this.jumpSprite)},update:function(){this.jumpKeyPressed&&this.jump(),this.animate(),this.node.y<-cc.winSize.height/2&&this.node.emit("die")},jump:function(){this.touching?(this.startJumpY=this.node.y,this.jumpFinished=!1,this.isJumping=!0,this.body.linearVelocity=this.jumpSpeed):this.isJumping&&!this.jumpFinished&&(this.node.y-this.startJumpY<this.maxJumpDistance?this.body.linearVelocity=this.jumpSpeed:this.jumpFinished=!0)}}),cc._RF.pop()},{}],Platforms:[function(t,e){"use strict";cc._RF.push(e,"875d1itIaZM97UcNaaVptKZ","Platforms"),cc.Class({extends:cc.Component,properties:{xOffsetMin:60,xOffsetMax:200,yOffsetMin:-120,yOffsetMax:120,tilesCountMin:2,tilesCountMax:6,platform:{default:null,type:cc.Prefab}},onLoad:function(){},generateRandomData:function(){var t={tilesCount:0,x:0,y:0},e=this.xOffsetMin+Math.random()*(this.xOffsetMax-this.xOffsetMin),i=this.yOffsetMin+Math.random()*(this.yOffsetMax-this.yOffsetMin);t.x=this.current.node.x+this.current.node.width+e;var n=this.current.node.y+i,o=cc.winSize.height/2,s=-cc.winSize.height/2;return n=Math.min(n,o-2*this.current.node.height),n=Math.max(n,s+this.current.node.height),t.y=n,t.tilesCount=this.tilesCountMin+Math.floor(Math.random()*(this.tilesCountMax-this.tilesCountMin)),t},start:function(){this.platforms=[],this.createPlatform({tilesCount:4,x:-200,y:-200})},createPlatform:function(t){t||(t=this.generateRandomData());var e=this.platforms.find(function(t){return!t.active});if(e)this.current=e;else{var i=cc.instantiate(this.platform);this.node.addChild(i),this.current=i.getComponent("Platform"),this.platforms.push(this.current)}this.current.init(t.tilesCount,t.x,t.y)},update:function(){var t=cc.winSize.width/2;this.current.node.x+this.current.node.width<t&&this.createPlatform()}}),cc._RF.pop()},{}],Platform:[function(t,e){"use strict";cc._RF.push(e,"5f5ed/A1hhEIqojQgmilp6M","Platform"),cc.Class({extends:cc.Component,properties:{coinsOffsetMin:100,coinsOffsetMax:200,diamond:{default:null,type:cc.Prefab},tile:{default:null,type:cc.Prefab}},start:function(){},init:function(t,e,i){this.active=!0,this.node.removeAllChildren(),this.node.setPosition(cc.v2(e,i));for(var n=0;n<t;n++){var o=cc.instantiate(this.tile);this.node.addChild(o),o.setPosition(n*o.width,0)}this.node.width=64*t,this.node.height=64;var s=this.node.getComponent(cc.PhysicsBoxCollider);s.size.width=this.node.width,s.size.height=this.node.height,s.offset.x=this.node.width/2-32,s.apply(),this.createDiamonds()},createDiamonds:function(){var t=this,e=this.coinsOffsetMin+Math.random()*(this.coinsOffsetMax-this.coinsOffsetMin);this.node.children.forEach(function(i){if(Math.random()<=.4){var n=cc.instantiate(t.diamond);i.addChild(n),n.setPosition(0,e)}})},update:function(t){this.active&&(this.node.x-=150*t,this.node.x+this.node.width<-cc.winSize.width/2&&(this.active=!1))}}),cc._RF.pop()},{}],Score:[function(t,e){"use strict";cc._RF.push(e,"9b308m5JKZGjKH429ytKQYM","Score");var i=t("Globals");cc.Class({extends:cc.Component,properties:{scoreLabel:{default:null,type:cc.Label},bestScoreLabel:{default:null,type:cc.Label}},start:function(){var t=localStorage.getItem("score")||0;(!t||i.score>t)&&(t=i.score,localStorage.setItem("score",t)),this.scoreLabel.string=""+i.score.toString(),this.bestScoreLabel.string=""+t.toString(),this.node.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("Game")})}}),cc._RF.pop()},{Globals:"Globals"}],use_reversed_rotateTo:[function(t,e){"use strict";cc._RF.push(e,"1374bGCdqVJn7QYLLZDdDv6","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["use_reversed_rotateTo","Background","Game","Globals","Hero","Platform","Platforms","Score"]);